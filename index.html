<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="no-cache" http-equiv="cache-control"/>
<meta content="0" http-equiv="expires"/>
<meta content="no-cache" http-equiv="pragma"/>
<meta content="summary_large_image" name="twitter:card"/>
<meta content="Cozmyc" name="twitter:site"/>
<meta content="ProjectKorra Addons Catalogue" name="twitter:title"/>
<meta content="Welcome to the catalogue of addons for ProjectKorra, sourced from the ProjectKorra forums and GitHub, fully updated at least quarterly. Contributions are welcome, and removal requests will be honored. Data can be found at: https://github.com/CozmycDev/PK-Addons" name="twitter:description"/>
<meta content="https://github.com/CozmycDev/PK-Addons/" name="twitter:url"/>
<meta content="website" property="og:type"/>
<meta content="ProjectKorra Addons Catalogue" property="og:title"/>
<meta content="Welcome to the catalogue of addons for ProjectKorra, sourced from the ProjectKorra forums and GitHub, fully updated at least quarterly. Contributions are welcome, and removal requests will be honored. Data can be found at: https://github.com/CozmycDev/PK-Addons" property="og:description"/>
<meta content="https://github.com/CozmycDev/PK-Addons/" property="og:url"/>
<title>ProjectKorra Addons</title>
<link href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/6.2.0/mdb.min.css" rel="stylesheet"/>
<link href="https://cdn.datatables.net/1.13.3/css/jquery.dataTables.min.css" rel="stylesheet"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet"/>
<link href="https://cdn.jsdelivr.net/npm/bootswatch@5.3.0/dist/lux/bootstrap.min.css" id="theme-stylesheet" rel="stylesheet"/>
<style>
    select {
      color: #ffffff; /* Changes text color to white */
      background-color: #2c2c2c; /* Adjust background to match your theme */
      border: 1px solid #6c757d; /* Adjusts border color to blend with the theme */
      padding: 5px; /* Adjust padding if necessary */
    }

    select option {
      color: #000000; /* Optional: make the options inside white when hovered */
      background-color: #ffffff; /* Optional: adjusts background of the dropdown options */
    }
  </style>
</head>
<body class="bg-dark text-white">
<div class="container my-5">
<h1 class="text-center mb-4">ProjectKorra Addons</h1>
<div class="table-responsive">
<table class="table table-dark table-striped table-bordered text-white" id="table">
<thead class="bg-secondary">
<tr>
<th>Name</th>
<th>Author</th>
<th>Category</th>
<th>Last Update</th>
<th>Latest Version</th>
<th>Download</th>
<th>Source</th>
<th>Min MC</th>
<th>Max MC</th>
<th>Min PK</th>
<th>Max PK</th>
</tr>
</thead>
<tbody id="table-body">
</tbody>
</table>
</div>
</div>
<div class="text-center">
<p>This site is not owned or operated by ProjectKorra.&lt;br&gt;If you would like to see something added or removed, open a PR or issue on &lt;a href="https://github.com/CozmycDev/PK-Addons"&gt;the repo&lt;/a&gt;.&lt;br&gt;Legend: &lt;i class="fas fa-question-circle"&gt;&lt;/i&gt;=Unknown, &lt;i class="fa-solid fa-x"&gt;&lt;/i&gt;=Dead Link &lt;br&gt;Last Updated: Sep 14, 2024</p>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/6.2.0/mdb.min.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.4/moment.min.js"></script>
<script src="https://cdn.datatables.net/1.13.3/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/plug-ins/1.13.3/sorting/datetime-moment.js"></script>
<script>
    document.addEventListener("DOMContentLoaded", function() {  
      const forumUrl = "https://cozmycdev.github.io/PK-Addons/forum.json";
      const githubUrl = "https://cozmycdev.github.io/PK-Addons/github.json";

      function fetchAndMergeData() {
        return Promise.all([fetch(forumUrl), fetch(githubUrl)])
          .then(responses => Promise.all(responses.map(res => res.json())))
          .then(([forumData, githubData]) => {
            if (!Array.isArray(forumData) || !Array.isArray(githubData)) {
              throw new Error('Invalid data format: Expected arrays');
            }

            return [...forumData, ...githubData];
          })
          .catch(error => {
            console.error('Error fetching or merging data:', error);
            return [];
          });
      }

      function normalizeDate(dateStr) {
        const formats = [
          "MMM D, YYYY", 
          "MMM D YYYY", 
          "MMMM D, YYYY", 
          "MMMM D YYYY"
        ];

        const date = moment(dateStr, formats, true);
        return date.isValid() ? date.format('YYYY-MM-DD') : null;
      }

      fetchAndMergeData().then(data => {
        if (!Array.isArray(data)) {
          console.error('Invalid data format: Expected an array');
          return;
        }

        const tableBody = document.getElementById("table-body");

        data.forEach(entry => {
            const normalizedDate = normalizeDate(entry.last_update);
            const downloadLink = entry.download_url 
                ? (entry.download_url !== "DEAD LINK" 
                ? `<a href="${entry.download_url}" target="_blank"><i class="fa-solid fa-download"></i></a>` 
                : '<i class="fa-solid fa-x"></i>') 
            : '<i class="fas fa-question-circle"></i>'; 

            const sourceLink = entry.source_url 
                ? (entry.source_url !== "DEAD LINK" 
                ? `<a href="${entry.source_url}" target="_blank">Source</a>` 
                : '<i class="fa-solid fa-x"></i>') 
            : '<i class="fas fa-question-circle"></i>';

            const row = document.createElement("tr");

            row.innerHTML = `
              <td>${entry.name || '<i class="fas fa-question-circle"></i>'}</td>
              <td>${entry.author || '<i class="fas fa-question-circle"></i>'}</td>
              <td>${entry.category || '<i class="fas fa-question-circle"></i>'}</td>
              <td>${normalizedDate || '<i class="fas fa-question-circle"></i>'}</td>
              <td>${entry.latest_version || '<i class="fas fa-question-circle"></i>'}</td>
              <td>${downloadLink}</td>
              <td>${sourceLink}</td>
              <td>${entry.min_mc_version || '<i class="fas fa-question-circle"></i>'}</td>
              <td>${entry.max_mc_version || '<i class="fas fa-question-circle"></i>'}</td>
              <td>${entry.min_pk_version || '<i class="fas fa-question-circle"></i>'}</td>
              <td>${entry.max_pk_version || '<i class="fas fa-question-circle"></i>'}</td>
            `;

            tableBody.appendChild(row);
        });

        $.fn.dataTable.moment('YYYY-MM-DD');

        $('#table').DataTable({
          "order": [[3, 'desc']], 
          "columnDefs": [
            {
              "targets": 3, 
              "type": "date"
            }
          ]
        });
      });
    });
  </script>
</body>
</html>
